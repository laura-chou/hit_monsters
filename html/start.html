<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" type="image/png" href="../images/icon.png">
  <link rel="stylesheet" href="../css/common.style.css">
  <link rel="stylesheet" href="../css/start.styles.css">
  <title>怪獸終結者</title>
</head>
<body>
  <section>
    <div class="monster-info">
      <span>關卡 1</span>
      <img src="../images/monster1.png">
      <div class="hp-container">
        <div class="hp-bar" style="width: 70%;"></div>
      </div>
    </div>
    <table border="2px outset black">
      <tr>
          <td>
            <div class="head"></div>
          </td>
          <td>
            <div class="head"></div>
          </td>
          <td>
            <div class="head"></div>
          </td>
      </tr>
      <tr>
          <td>
            <div class="head"></div>
          </td>
          <td>
            <div class="head"></div>
          </td>
          <td>
            <div class="head"></div>
          </td>
      </tr>
      <tr>
          <td>
            <div class="head"></div>
          </td>
          <td>
            <div class="head"></div>
          </td>
          <td>
            <div class="head"></div>
          </td>
      </tr>
    </table>
  </section>
</body>
<script src="../js/jquery-3.7.1.min.js"></script>
<script type="module">
  import { randNumberWithMin } from "../js/common.js";
  import { playAudioEffect } from "../js/start.js";
  const heads = document.getElementsByClassName("head");

  let lastIndex = -1;

  setInterval(() => {
    for (let head of heads) {
      head.classList.remove("appear", "hit");
    }

    let newIndex;
    do {
      newIndex = randNumberWithMin(0, heads.length-1);
    } while (newIndex === lastIndex);

    lastIndex = newIndex;

    heads[newIndex].classList.add("appear");
    heads[newIndex].style.backgroundImage = `url("../images/monster1.png")`;
  }, 1500);

  $(".head").on("click", (event) => {
    playAudioEffect("hit");
    const clickedElement = $(event.target);
    clickedElement.addClass("hit");
  });
</script>
</html>